local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AllowFriends"
screenGui.ResetOnSpawn = false
screenGui.Parent = game:GetService("CoreGui")

-- ðŸŸª Container
local container = Instance.new("Frame")
container.Size = UDim2.fromOffset(140, 50)
container.Position = UDim2.fromOffset(200, 220)
container.BackgroundColor3 = Color3.fromRGB(18, 8, 30)
container.BackgroundTransparency = 1
container.BorderSizePixel = 0
container.ClipsDescendants = true
container.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = container

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(140, 90, 255)
stroke.Thickness = 1.5
stroke.Transparency = 1
stroke.Parent = container

local scale = Instance.new("UIScale")
scale.Scale = 0.85
scale.Parent = container

-- ðŸŸ£ Button
local button = Instance.new("TextButton")
button.Size = UDim2.fromScale(1, 1)
button.BackgroundTransparency = 1
button.Text = "a5trxl"
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Font = Enum.Font.GothamBold
button.TextSize = 18
button.AutoButtonColor = false
button.TextTransparency = 1
button.Parent = container

-- ðŸŒŠ Splash sound
local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://9118826046" -- splash / liquid tap
clickSound.Volume = 0.7
clickSound.PlaybackSpeed = 1.05
clickSound.Parent = button

-- ðŸŽ¬ Startup animation
local tweenInfo = TweenInfo.new(0.45, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)

TweenService:Create(container, tweenInfo, {
	BackgroundTransparency = 0,
	Position = UDim2.fromOffset(200, 200)
}):Play()

TweenService:Create(scale, tweenInfo, { Scale = 1 }):Play()
TweenService:Create(stroke, tweenInfo, { Transparency = 0.3 }):Play()
TweenService:Create(button, tweenInfo, { TextTransparency = 0 }):Play()

-- ðŸŒŠ Ripple
local function ripple(input)
	local r = Instance.new("Frame")
	r.BackgroundColor3 = Color3.fromRGB(170, 130, 255)
	r.BackgroundTransparency = 0.4
	r.Size = UDim2.fromScale(0, 0)
	r.AnchorPoint = Vector2.new(0.5, 0.5)
	r.Position = UDim2.fromOffset(
		input.Position.X - container.AbsolutePosition.X,
		input.Position.Y - container.AbsolutePosition.Y
	)
	r.Parent = container

	local c = Instance.new("UICorner")
	c.CornerRadius = UDim.new(1, 0)
	c.Parent = r

	local maxSize = math.max(container.AbsoluteSize.X, container.AbsoluteSize.Y) * 1.6

	local t = TweenService:Create(
		r,
		TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
		{
			Size = UDim2.fromOffset(maxSize, maxSize),
			BackgroundTransparency = 1
		}
	)

	t:Play()
	t.Completed:Connect(function()
		r:Destroy()
	end)
end

-- ðŸ–± Drag logic
local dragging = false
local dragStart, startPos

button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1
	or input.UserInputType == Enum.UserInputType.Touch then

		clickSound:Play() -- ðŸŒŠ splash sound
		ripple(input)

		dragging = true
		dragStart = input.Position
		startPos = container.Position
	end
end)

button.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (
		input.UserInputType == Enum.UserInputType.MouseMovement
		or input.UserInputType == Enum.UserInputType.Touch
	) then
		local delta = input.Position - dragStart
		container.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end)

-- ðŸ”¥ Click action
local function fire()
	game:GetService("ReplicatedStorage")
		:WaitForChild("Packages")
		:WaitForChild("Net")
		:WaitForChild("RE/PlotService/ToggleFriends")
		:FireServer()
end

button.MouseButton1Click:Connect(fire)
button.TouchTap:Connect(fire)
